!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("vue")):"function"==typeof define&&define.amd?define(["vue"],n):t.PortalVue=n(t.Vue)}(this,function(t){"use strict";function n(t){for(var n=t.hasAttributes()?t.attributes:[],e={},r=0;r<n.length;r++){var s=n[r];s.value&&(e[s.name]=""===s.value||s.value)}var o=void 0,i=void 0;return e.class&&(o=e.class,delete e.class),e.style&&(i=e.style,delete e.style),{attrs:e,class:o,style:i}}function e(t){return Array.isArray(t)||"object"===(void 0===t?"undefined":i(t))?Object.freeze(t):t}function r(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.reduce(function(t,e){var r=e.passengers[0];return r="function"==typeof r?r(n):e.passengers,t.concat(r)},[])}function s(t,n){return function(){t&&t.apply(this,arguments),n&&n.apply(this,arguments)}}function o(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.component(n.portalName||"portal",y),t.component(n.portalTargetName||"portalTarget",d)}t=t&&"default"in t?t.default:t;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},u=function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)},l={},c=t.extend({data:function(){return{transports:l}},methods:{open:function(n){var r=n.to,s=n.from,o=n.passengers;if(r&&s&&o){n.passengers=e(o);-1===Object.keys(this.transports).indexOf(r)&&t.set(this.transports,r,[]);var i=this.getTransportIndex(n),a=this.transports[r].slice(0);-1===i?a.push(n):a[i]=n,a.sort(function(t,n){return t.order-n.order}),this.transports[r]=a}},close:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=t.to,r=t.from;if(e&&r&&this.transports[e])if(n)this.transports[e]=[];else{var s=this.getTransportIndex(t);if(s>=0){var o=this.transports[e].slice(0);o.splice(s,1),this.transports[e]=o}}},hasTarget:function(t){return this.transports.hasOwnProperty(t)},hasContentFor:function(t){return!!this.transports[t]&&this.getContentFor(t).length>0},getSourceFor:function(t){return this.transports[t]&&this.transports[t][0].from},getContentFor:function(t){var n=this.transports[t];if(n)return r(n)},getTransportIndex:function(t){var n=t.to,e=t.from;for(var r in this.transports[n])if(this.transports[n][r].from===e)return r;return-1}}}),h=new c(l),p=/^(attrs|props|on|nativeOn|class|style|hook)$/,f=function(t){return t.reduce(function(t,n){var e,r,o,i,a;for(o in n)if(e=t[o],r=n[o],e&&p.test(o))if("class"===o&&("string"==typeof e&&(a=e,t[o]=e={},e[a]=!0),"string"==typeof r&&(a=r,n[o]=r={},r[a]=!0)),"on"===o||"nativeOn"===o||"hook"===o)for(i in r)e[i]=s(e[i],r[i]);else if(Array.isArray(e))t[o]=e.concat(r);else if(Array.isArray(r))t[o]=[e].concat(r);else for(i in r)e[i]=r[i];else t[o]=n[o];return t},{})},d={abstract:!1,name:"portalTarget",props:{attributes:{type:Object,default:function(){return{}}},multiple:{type:Boolean,default:!1},name:{type:String,required:!0},slim:{type:Boolean,default:!1},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"div"},transition:{type:[Boolean,String,Object],default:!1},transitionEvents:{type:Object,default:function(){return{}}}},data:function(){return{transports:h.transports,firstRender:!0}},created:function(){this.transports[this.name]||this.$set(this.transports,this.name,[])},mounted:function(){var t=this;this.unwatch=this.$watch("ownTransports",this.emitChange),this.$nextTick(function(){t.transition&&(t.firstRender=!1)}),this.$options.abstract&&(this.$options.abstract=!1)},updated:function(){this.$options.abstract&&(this.$options.abstract=!1)},beforeDestroy:function(){this.unwatch(),this.$el.innerHTML=""},methods:{emitChange:function(t,n){if(this.multiple)this.$emit("change",[].concat(u(t)),[].concat(u(n)));else{var e=0===t.length?void 0:t[0],r=0===n.length?void 0:n[0];this.$emit("change",a({},e),a({},r))}}},computed:{ownTransports:function(){var t=this.transports[this.name]||[];return this.multiple?t:0===t.length?[]:[t[t.length-1]]},passengers:function(){return r(this.ownTransports,this.slotProps)},children:function(){return 0!==this.passengers.length?this.passengers:this.$slots.default||[]},hasAttributes:function(){return Object.keys(this.attributes).length>0},noWrapper:function(){var t=!this.hasAttributes&&this.slim;return t&&this.children.length>1&&console.warn("[portal-vue]: PortalTarget with `slim` option received more than one child element."),t},withTransition:function(){return!!this.transition},transitionData:function(){var t=this.transition,n={};return this.firstRender&&"object"===i(this.transition)&&!this.transition.appear?(n.props={name:"__notranstition__portal-vue__"},n):("string"==typeof t?n.props={name:t}:"object"===(void 0===t?"undefined":i(t))&&(n.props=t),this.renderSlim&&(n.props.tag=this.tag),n.on=this.transitionEvents,n)},transportedClasses:function(){return this.ownTransports.map(function(t){return t.class}).reduce(function(t,n){return t.concat(n)},[]).filter(function(t,n,e){return e.indexOf(t)===n})}},render:function(t){this.$options.abstract=!0;var n=this.noWrapper?"transition":"transition-group",e=this.tag;if(this.withTransition)return t(n,f([this.transitionData,{class:"vue-portal-target"}]),[this.children]);var r=this.ownTransports.length;return this.noWrapper?this.children[0]:t(e,f([{class:"vue-portal-target "+this.transportedClasses.join(" ")},this.attributes,{key:r}]),[this.children])}},m="undefined"!=typeof window,g=1,y={abstract:!1,name:"portal",props:{disabled:{type:Boolean,default:!1},name:{type:String,default:function(){return String(g++)}},order:{type:Number,default:0},slim:{type:Boolean,default:!1},slotProps:{type:Object,default:function(){return{}}},tag:{type:[String],default:"DIV"},targetEl:{type:m?[String,HTMLElement]:String},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}}},mounted:function(){this.targetEl&&this.mountToTarget(),this.disabled||this.sendUpdate(),this.$options.abstract&&(this.$options.abstract=!1)},updated:function(){this.disabled?this.clear():this.sendUpdate(),this.$options.abstract&&(this.$options.abstract=!1)},beforeDestroy:function(){this.clear(),this.mountedComp&&this.mountedComp.$destroy()},watch:{to:function(t,n){n&&this.clear(n),this.sendUpdate()},targetEl:function(t,n){t&&this.mountToTarget()}},methods:{normalizedSlots:function(){return this.$scopedSlots.default?[this.$scopedSlots.default]:this.$slots.default},sendUpdate:function(){var t=this.normalizedSlots();if(t){var n=[this.$vnode.data.staticClass,this.$vnode.data.class].filter(function(t){return!!t&&!!t.length}).map(function(t){return t.split(" ")}).reduce(function(t,n){return t.concat(n)},[]);h.open({from:this.name,to:this.to,passengers:[].concat(u(t)),class:n,order:this.order})}else this.clear()},clear:function(t){h.close({from:this.name,to:t||this.to})},mountToTarget:function(){var e=void 0,r=this.targetEl;if("string"==typeof r)e=document.querySelector(r);else{if(!(r instanceof HTMLElement))return void console.warn("[vue-portal]: value of targetEl must be of type String or HTMLElement");e=r}if(e){var s=new t(a({},d,{parent:this,propsData:{name:this.to,tag:e.tagName,attributes:n(e)}}));s.$mount(e),this.mountedComp=s}else console.warn("[vue-portal]: The specified targetEl "+r+" was not found")},normalizeChildren:function(t){return"function"==typeof t?t(this.slotProps):t}},render:function(t){var n=this.$slots.default||this.$scopedSlots.default||[],e=this.tag;return n.length&&this.disabled?(this.$options.abstract=!0,n.length<=1&&this.slim?n[0]:t(e,null,[this.normalizeChildren(n)])):t(e,{class:"v-portal",style:"display: none",key:"v-portal-placeholder"},[])}};return"undefined"!=typeof window&&window.Vue&&window.Vue.use({install:o}),{install:o,Portal:y,PortalTarget:d,Wormhole:h}});
